---
layout: post
title: "Expressë¡œ ì„œë²„ êµ¬ì„±í•˜ê¸° ( ë¼ìš°íŒ… ) - 8"
subtitle: "Express ë¼ìš°íŒ… ì˜ˆì œ"
date: 2021-01-03 23:00:00
author: "Kyun2da"
header-style: text
tags:
  - ì„œë²„
  - Node.js
  - Express
# 0ï¸âƒ£ 1ï¸âƒ£ 2ï¸âƒ£ 3ï¸âƒ£ 4ï¸âƒ£ 5ï¸âƒ£ 6ï¸âƒ£ 7ï¸âƒ£ 8ï¸âƒ£ 9ï¸âƒ£ ğŸ”Ÿ
---

## 1ï¸âƒ£ ì„œë¡ 

ì•ˆë…•í•˜ì„¸ìš”. ì˜¤ëŠ˜ì€ Expressë¡œ ë¼ìš°íŒ…í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ë ¤ê³  í•©ë‹ˆë‹¤.

ì§€ë‚œë²ˆì— [Express - ê¸°ë³¸ ë¼ìš°íŒ…](https://kyun2da.github.io/2020/12/25/express2/) í¬ìŠ¤íŒ…ì„ í†µí•´ ê¸°ë³¸ ë¼ìš°íŒ… í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ëŠ”ë°ìš”.

ì´ë²ˆì—ëŠ” ì¢€ë” ê¹Šì´ ë“¤ì–´ê°€ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

ë‹¤ìŒ ë‚´ìš©ì€ [ê³µì‹ ë¬¸ì„œ](https://expressjs.com/en/guide/routing.html)ë¥¼ ì •ë¦¬í•˜ë©° ë§Œë“  ê¸€ì…ë‹ˆë‹¤.

ê·¸ëŸ¼ ì‹œì‘í•´ë³´ê² ìŠµë‹ˆë‹¤.

## 2ï¸âƒ£ ê¸°ë³¸ ë¼ìš°íŒ… ë³µìŠµ

Express ëŠ” HTTP methodë¥¼ ì‚¬ìš©í•˜ì—¬ ë¼ìš°íŒ…ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë³´í†µ get, post, put, deleteê°€ ë§ì´ ì“°ì´ê³¤ í•˜ëŠ”ë°ìš”.

```js
var express = require("express");
var app = express();

app.get("/", function (req, res) {
  res.send("hello world");
});
```

ìœ„ ì˜ˆì œë¥¼ ë³´ë©´ app.getì˜ `get`ì´ ë°”ë¡œ HTTP methodì˜ ì˜ˆì¤‘ í•˜ë‚˜ ì…ë‹ˆë‹¤.

## 3ï¸âƒ£ Route Parameter

ë¼ìš°íŠ¸ íŒŒë¼ë¯¸í„°ëŠ” URLì—ì„œ í•´ë‹¹ ìœ„ì¹˜ì— ì§€ì •ëœ ê°’ì„ ê°€ì ¸ì˜¤ëŠ”ë° ì‚¬ìš©ë˜ëŠ” URL ì¡°ê°ì…ë‹ˆë‹¤.

í•´ë‹¹ ê°’ì€ ê²½ë¡œì— ì§€ì •ëœ ë§¤ê°œë³€ìˆ˜ì˜ ì´ë¦„ì´ í•´ë‹¹í‚¤ë¡œ req.paramsê°œì²´ì— ë“¤ì–´ì˜µë‹ˆë‹¤.

> Route path: /users/:userId/books/:bookId  
> Request URL: http://localhost:3000/users/34/books/8989  
> req.params: { "userId": "34", "bookId": "8989" }

ìœ„ì™€ ê°™ì´ ë°›ì•„ì˜¤ë ¤ë©´ ë‹¤ìŒê³¼ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.

```js
app.get("/users/:userId/books/:bookId", function (req, res) {
  res.send(req.params);
});
```

## 4ï¸âƒ£ Route Handler

Express ì—ì„œëŠ” ë¯¸ë“¤ì›¨ì–´ì²˜ëŸ¼ ì‘ë™í•˜ëŠ” ì—¬ëŸ¬ ì½œë°± ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ì•„ë˜ì˜ ì˜ˆì œì™€ ê°™ì´ í•¨ìˆ˜, í•¨ìˆ˜ì˜ ë°°ì—´ ë˜ëŠ” ë‘ê°€ì§€ ì¡°í•©ì˜ í˜•íƒœë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```js
var cb0 = function (req, res, next) {
  console.log("CB0");
  next();
};

var cb1 = function (req, res, next) {
  console.log("CB1");
  next();
};

app.get(
  "/example/d",
  [cb0, cb1], // cb0, cb1 ë¯¸ë“¤ì›¨ì–´
  function (req, res, next) {
    console.log("the response will be sent by the next function ...");
    next();
  },
  function (req, res) {
    res.send("Hello from D!");
  }
);
```

cb0, cb1ì„ ë¯¸ë“¤ì›¨ì–´ë¡œ ì‚¬ìš©í•˜ëŠ” ì˜ˆì œì…ë‹ˆë‹¤. ë¯¸ë“¤ì›¨ì–´ë¡œ ì‚¬ìš©í• ë•ŒëŠ” `next()`ë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” ê²ƒì„ ê¸°ì–µí•´ì£¼ì‹œë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ë˜í•œ ë¯¸ë“¤ì›¨ì–´ ì—¬ëŸ¬ê°œë¥¼ ì‚¬ìš©í•œë‹¤ë©´ `[]`ë¡œ ê°ì‹¸ì„œ ì‚¬ìš©í•˜ì‹œë©´ ì—¬ëŸ¬ê°œì˜ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 5ï¸âƒ£ Response methods

ë‹¤ìŒ í‘œì˜ ì‘ë‹µ ê°œì²´ì— ìˆëŠ” ë©”ì„œë“œëŠ” í´ë¼ì´ì–¸íŠ¸ì— ì‘ë‹µì„ ë³´ë‚´ê³  ìš”ì²­-ì‘ë‹µ ì£¼ê¸°ë¥¼ ì¢…ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë§Œì•½ route handlerë¡œë¶€í„° ì´ëŸ¬í•œ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì´ ì¤‘ë‹¨ë©ë‹ˆë‹¤.

| Method           | Description                                                         |
| ---------------- | ------------------------------------------------------------------- |
| res.download()   | íŒŒì¼ ë‹¤ìš´ë¡œë“œë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.                                         |
| res.end()        | ì‘ë‹µ í”„ë¡œì„¸ìŠ¤ë¥¼ ëëƒ…ë‹ˆë‹¤.                                           |
| res.json()       | JSON response ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.                                          |
| res.jsonp()      | Jsonp ë¡œ JSON response ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.                                 |
| res.redirect()   | ìš”ì²­ì„ redirect í•©ë‹ˆë‹¤.                                             |
| res.render()     | í…œí”Œë¦¿ì„ ë Œë”ë§ í•©ë‹ˆë‹¤.                                             |
| res.send()       | ë‹¤ì–‘í•œ íƒ€ì…ì˜ ì‘ë‹µì„ ë³´ëƒ…ë‹ˆë‹¤.                                      |
| res.sendFile()   | íŒŒì¼ì„ octet stream (8ë¹„íŠ¸ ë‹¨ìœ„ì˜ ë°”ì´ë„ˆë¦¬ ë°ì´í„°)ìœ¼ë¡œ ë³´ëƒ…ë‹ˆë‹¤.    |
| res.sendStatus() | ì‘ë‹µìƒíƒœ ì½”ë“œë¥¼ ì„¤ì •í•˜ê³  í•´ë‹¹ ë¬¸ìì—´ í‘œí˜„ì„ ì‘ë‹µ ë³¸ë¬¸ìœ¼ë¡œ ë³´ëƒ…ë‹ˆë‹¤. |

## 6ï¸âƒ£ app.route()

app.route() ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ì—¬ ê²½ë¡œì— ëŒ€í•œ chainable route handlerë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ëª¨ë“ˆë¡œ ê²½ë¡œë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ìœ ìš©í•˜ë©°, ì¤‘ë³µì„±ê³¼ ì˜¤íƒ€ë¥¼ ì¤„ì¼ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

ì˜ˆì‹œëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

```js
app
  .route("/book")
  .get(function (req, res) {
    res.send("Get a random book");
  })
  .post(function (req, res) {
    res.send("Add a book");
  })
  .put(function (req, res) {
    res.send("Update the book");
  });
```

## 7ï¸âƒ£ express.Router

express.Routerë¥¼ ì´ìš©í•˜ë©´ ëª¨ë“ˆì‹ ê²½ë¡œ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì•„ë˜ ì˜ˆëŠ” ë¼ìš°í„°ë¡œ ëª¨ë“ˆì„ ìƒì„±í•˜ê³ , ê·¸ì•ˆì— ë¯¸ë“¤ì›¨ì–´ ê¸°ëŠ¥ì„ ë¡œë“œí•˜ê³ , ì¼ë¶€ ê²½ë¡œë¥¼ ì •ì˜í•˜ê³ , ë¼ìš°í„° ëª¨ë“ˆì„ ê¸°ë³¸ ì•±ì˜ ê²½ë¡œì— ë§ˆìš´íŠ¸ í•˜ëŠ” ì˜ˆì œì…ë‹ˆë‹¤.

```js
var express = require("express");
var router = express.Router();

// ì´ ë¼ìš°í„°ì— íŠ¹ì •ëœ ë¯¸ë“¤ì›¨ì–´ì…ë‹ˆë‹¤.
router.use(function timeLog(req, res, next) {
  console.log("Time: ", Date.now());
  next();
});
// home route ì •ì˜
router.get("/", function (req, res) {
  res.send("Birds home page");
});
// about route ì •ì˜
router.get("/about", function (req, res) {
  res.send("About birds");
});

module.exports = router;
```

## 8ï¸âƒ£ ë§ˆì¹˜ë©°..

ì˜¤ëŠ˜ì€ ë¼ìš°íŒ…í•˜ëŠ” ë²•ì„ ì¢€ë” ê¹Šì´ìˆê²Œ ë‹¤ë¤„ë³´ì•˜ìŠµë‹ˆë‹¤.

ë‹¤ìŒ ì‹œê°„ì—ëŠ” ë¯¸ë“¤ì›¨ì–´ì— ëŒ€í•´ ì¢€ë” ìì„¸í•˜ê²Œ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°–ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.
